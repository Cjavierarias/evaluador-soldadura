<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#121212">
  <meta name="description" content="Evaluador de destreza de soldadura usando sensores del celular">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>Evaluador de Soldadura Pro</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" href="icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto+Mono:wght@500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app" class="app-container">
    
    <!-- Pantalla de Bienvenida -->
    <section id="welcome-screen" class="screen active">
      <div class="welcome-content">
        <div class="logo-container">
          <svg class="welding-icon" viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="60" cy="60" r="55" stroke="#ff6b35" stroke-width="4"/>
            <path d="M45 70 L60 45 L75 70" stroke="#ff6b35" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="60" cy="55" r="8" fill="#ffb300"/>
            <path d="M35 85 L85 85" stroke="#ff6b35" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </div>
        <h1>Evaluador de Soldadura Pro</h1>
        <p class="subtitle">Medici√≥n precisa de t√©cnica de soldadura</p>
        <p class="description">Eval√∫a tu destreza en soldadura usando los sensores de tu dispositivo m√≥vil. Ideal para pr√°ctica, entrenamiento y certificaciones.</p>
        
        <div class="welcome-buttons">
          <button class="btn-primary btn-large" id="btn-new-evaluation">
            <span>Nueva Evaluaci√≥n</span>
            <span class="btn-subtitle">Registro completo con env√≠o a Google Sheets</span>
          </button>
          <button class="btn-secondary btn-large" id="btn-quick-test">
            <span>Prueba R√°pida</span>
            <span class="btn-subtitle">Sin registro, solo pr√°ctica</span>
          </button>
        </div>
        
        <div class="mode-selector">
          <p class="mode-label">Modo de evaluaci√≥n:</p>
          <div class="mode-options">
            <button class="mode-btn active" data-mode="practice">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/></svg>
              <span>Pr√°ctica</span>
            </button>
            <button class="mode-btn" data-mode="exam">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
              <span>Examen</span>
            </button>
          </div>
        </div>
        
        <div class="requirements-card">
          <h3>Requisitos del Dispositivo</h3>
          <ul>
            <li>Gyroscopio integrado</li>
            <li>Aceler√≥metro funcional</li>
            <li>C√°mara trasera</li>
            <li>Conexi√≥n a internet (solo para env√≠o de datos)</li>
          </ul>
        </div>
        
        <button class="btn-outline" id="btn-view-history">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>
          Ver Historial
        </button>
        
        <div class="info-note">
          <p><strong>Nota:</strong> Para mejores resultados, fija tu celular firmemente a la antorcha o sost√©ngalo paralelamente al electrodo durante la evaluaci√≥n.</p>
        </div>
      </div>
    </section>

    <!-- Pantalla de Onboarding / Tutorial -->
    <section id="onboarding-screen" class="screen">
      <div class="onboarding-container">
        <div class="onboarding-step active" data-step="1">
          <div class="step-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="40" y="100" width="120" height="60" rx="5" fill="#2c3e50"/>
              <rect x="60" y="60" width="20" height="80" rx="3" fill="#ff6b35"/>
              <circle cx="70" cy="55" r="10" fill="#ffb300"/>
              <path d="M85 50 L110 80 L100 90" stroke="#ffb300" stroke-width="3"/>
            </svg>
          </div>
          <h2>Posiciona tu Dispositivo</h2>
          <p>Coloca tu celular firmemente adherido a la antorcha de soldadura o sostenlo paralelamente al electrodo. La c√°mara debe apuntar hacia la direcci√≥n de soldadura.</p>
        </div>
        
        <div class="onboarding-step" data-step="2">
          <div class="step-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="100" cy="100" r="80" stroke="#27ae60" stroke-width="6"/>
              <path d="M100 40 L100 100 L140 100" stroke="#ffb300" stroke-width="4" stroke-linecap="round"/>
              <text x="100" y="150" text-anchor="middle" fill="#27ae60" font-size="14" font-weight="bold">45¬∞</text>
            </svg>
          </div>
          <h2>√Ångulo de Trabajo</h2>
          <p>Mant√©n un √°ngulo de trabajo entre 30¬∞ y 60¬∞ respecto a la superficie de soldadura. El √°ngulo de viaje debe mantenerse constante entre 0¬∞ y 15¬∞.</p>
        </div>
        
        <div class="onboarding-step" data-step="3">
          <div class="step-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="20" y="90" width="160" height="20" rx="3" fill="#2c3e50"/>
              <circle cx="60" cy="100" r="15" fill="#ff6b35"/>
              <circle cx="100" cy="100" r="15" fill="#27ae60"/>
              <circle cx="140" cy="100" r="15" fill="#ff6b35"/>
              <path d="M50 70 L60 85" stroke="#27ae60" stroke-width="2"/>
              <path d="M90 70 L100 85" stroke="#27ae60" stroke-width="2"/>
              <path d="M130 70 L140 85" stroke="#27ae60" stroke-width="2"/>
              <text x="100" y="45" text-anchor="middle" fill="#ffb300" font-size="16" font-weight="bold">1.0 - 3.0 cm/s</text>
            </svg>
          </div>
          <h2>Velocidad de Soldadura</h2>
          <p>Mant√©n una velocidad constante entre 1.0 y 3.0 cm por segundo. Demasiado r√°pido genera penetraci√≥n insuficiente; demasiado lento genera sobrecalentamiento.</p>
        </div>
        
        <div class="onboarding-step" data-step="4">
          <div class="step-illustration">
            <svg viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg">
              <rect x="50" y="50" width="100" height="100" rx="10" fill="#1a1a2e" stroke="#ff6b35" stroke-width="3"/>
              <circle cx="100" cy="80" r="20" fill="none" stroke="#27ae60" stroke-width="4"/>
              <path d="M100 65 L100 80 L115 90" stroke="#27ae60" stroke-width="3" stroke-linecap="round"/>
              <rect x="70" y="110" width="60" height="8" rx="2" fill="#2c3e50"/>
              <rect x="70" y="110" width="40" height="8" rx="2" fill="#ffb300"/>
            </svg>
          </div>
          <h2>Calibraci√≥n Inicial</h2>
          <p>Antes de comenzar, calibra los sensores estableciendo la posici√≥n cero. Esto compensar√° cualquier inclinaci√≥n inicial del dispositivo.</p>
        </div>
        
        <div class="onboarding-progress">
          <div class="progress-dots">
            <span class="dot active"></span>
            <span class="dot"></span>
            <span class="dot"></span>
            <span class="dot"></span>
          </div>
        </div>
        
        <div class="onboarding-actions">
          <button class="btn-secondary" id="btn-skip-onboarding">Omitir</button>
          <button class="btn-primary" id="btn-next-step">Siguiente</button>
        </div>
      </div>
    </section>

    <!-- Pantalla de Registro -->
    <section id="register-screen" class="screen">
      <div class="register-content">
        <h2>Registro de Participante</h2>
        <p class="instructions">Ingresa los datos del participante para la evaluaci√≥n.</p>
        
        <form id="participant-form">
          <div class="form-group">
            <label for="participant-name">Nombre Completo</label>
            <input type="text" id="participant-name" placeholder="Ingresa tu nombre" required autocomplete="name">
          </div>
          
          <div class="form-group">
            <label for="participant-id">N√∫mero de Identificaci√≥n</label>
            <input type="text" id="participant-id" placeholder="C√©dula o ID" required autocomplete="off">
          </div>
          
          <div class="form-group">
            <label for="participant-course">Curso/Programa</label>
            <input type="text" id="participant-course" placeholder="Nombre del curso" required autocomplete="off">
          </div>
          
          <div class="form-group">
            <label for="participant-electrode">Tipo de Electrodo</label>
            <select id="participant-electrode" required>
              <option value="">Selecciona el tipo de electrodo</option>
              <option value="6011">E6011</option>
              <option value="6013">E6013</option>
              <option value="7018">E7018</option>
              <option value="8018">E8018</option>
              <option value="other">Otro</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="participant-position">Posici√≥n de Soldadura</label>
            <select id="participant-position" required>
              <option value="">Selecciona la posici√≥n</option>
              <option value="1G">1G (Horizontal)</option>
              <option value="2G">2G (Horizontal)</option>
              <option value="3G">3G (Vertical ascendente)</option>
              <option value="4G">4G (Vertical descendente)</option>
              <option value="1F">1F (Plana)</option>
              <option value="2F">2F (Horizontal)</option>
            </select>
          </div>
          
          <div class="form-actions">
            <button type="button" class="btn-secondary" id="btn-cancel-register">Cancelar</button>
            <button type="submit" class="btn-primary">Continuar a Calibraci√≥n</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Pantalla de Calibraci√≥n -->
    <section id="calibration-screen" class="screen">
      <div class="calibration-content">
        <h2>Calibraci√≥n de Sensores</h2>
        <p class="instructions">Aseg√∫rate de que el dispositivo est√© en la posici√≥n de soldadura inicial, luego presiona "Calibrar" para establecer el cero.</p>
        
        <div class="sensor-info-card">
          <h4>Estado de Sensores</h4>
          <div class="sensor-status-grid">
            <div class="sensor-status-item" id="status-gyro">
              <span class="status-icon">üåÄ</span>
              <span>Gyroscopio</span>
              <span class="status-text">Verificando...</span>
            </div>
            <div class="sensor-status-item" id="status-accel">
              <span class="status-icon">üì≥</span>
              <span>Aceler√≥metro</span>
              <span class="status-text">Verificando...</span>
            </div>
            <div class="sensor-status-item" id="status-camera">
              <span class="status-icon">üì∑</span>
              <span>C√°mara</span>
              <span class="status-text">Verificando...</span>
            </div>
          </div>
          <button class="btn-outline" id="btn-test-sensors">Actualizar Estado</button>
        </div>
        
        <div class="calibration-card">
          <h3>√Ångulo de Trabajo (Beta)</h3>
          <p class="calibration-desc">Inclinaci√≥n lateral del electrodo</p>
          <div class="sensor-display">
            <span class="label">√Ångulo actual:</span>
            <span class="value" id="beta-display">0¬∞</span>
          </div>
          <div class="calibration-actions">
            <button class="btn-primary" id="btn-calibrate-beta">Establecer Cero</button>
            <button class="btn-secondary" id="btn-reset-beta">Restaurar</button>
          </div>
          <div class="cal-status" id="beta-status">Sin calibrar - Se usar√° valor raw</div>
        </div>
        
        <div class="calibration-card">
          <h3>√Ångulo de Viaje (Gamma)</h3>
          <p class="calibration-desc">Inclinaci√≥n hacia adelante/atr√°s</p>
          <div class="sensor-display">
            <span class="label">√Ångulo actual:</span>
            <span class="value" id="gamma-display">0¬∞</span>
          </div>
          <div class="calibration-actions">
            <button class="btn-primary" id="btn-calibrate-gamma">Establecer Cero</button>
            <button class="btn-secondary" id="btn-reset-gamma">Restaurar</button>
          </div>
          <div class="cal-status" id="gamma-status">Sin calibrar - Se usar√° valor raw</div>
        </div>
        
        <div class="calibration-card">
          <h3>Sensibilidad de Velocidad</h3>
          <p class="calibration-desc">Ajusta la sensibilidad del sensor de movimiento</p>
          <div class="slider-container">
            <label>Factor de calibraci√≥n: <span id="velocity-factor-value">2.5</span>x</label>
            <input type="range" id="velocity-slider" min="1" max="5" step="0.1" value="2.5">
            <div class="slider-labels">
              <span>Menos sensible</span>
              <span>M√°s sensible</span>
            </div>
          </div>
          <div class="calibration-tip">üí° Sugerencia: Si los movimientos r√°pidos no se registran bien, aumenta este valor.</div>
        </div>
        
        <div class="calibration-card">
          <h3>Distancia al Patr√≥n</h3>
          <p class="calibration-desc">Distancia estimada entre dispositivo y patr√≥n de soldadura</p>
          <div class="sensor-display">
            <span class="label">Distancia:</span>
            <span class="value" id="distance-display">10 cm</span>
          </div>
          <div class="slider-container">
            <label>Distancia configurada: <span id="distance-value">10</span> cm</label>
            <input type="range" id="distance-slider" min="5" max="30" step="1" value="10">
            <div class="slider-labels">
              <span>5 cm</span>
              <span>30 cm</span>
            </div>
          </div>
        </div>
        
        <div class="calibration-summary">
          <h4>Resumen de Calibraci√≥n</h4>
          <p id="calibration-summary-text">Ajusta los valores arriba y guarda la calibraci√≥n.</p>
        </div>
        
        <div class="calibration-actions">
          <button class="btn-secondary" id="btn-back-to-welcome">Volver</button>
          <button class="btn-primary" id="btn-start-calibrated">Guardar y Continuar</button>
        </div>
      </div>
    </section>

    <!-- Pantalla de Evaluaci√≥n -->
    <section id="evaluation-screen" class="screen">
      <div class="eval-header">
        <h2 id="eval-title">Evaluaci√≥n en Progreso</h2>
        <div class="timer">
          <span id="eval-timer">00:30</span>
        </div>
      </div>
      
      <div class="eval-mode-badge" id="eval-mode-badge">
        Modo Pr√°ctica - Feedback Visible
      </div>
      
      <div class="eval-camera-preview" id="eval-camera">
        <video id="eval-video" autoplay playsinline muted></video>
        <canvas id="eval-overlay"></canvas>
        <div class="overlay-guide">
          <div class="guide-line horizontal"></div>
          <div class="guide-line vertical"></div>
        </div>
        <div class="distance-indicator" id="eval-distance">10 cm</div>
      </div>
      
      <!-- Gauges de √Ångulos (solo visible en modo pr√°ctica) -->
      <div class="gauges-container" id="gauges-container">
        <div class="gauge-wrapper">
          <div class="gauge-label">√Ångulo Trabajo</div>
          <div class="gauge-bar-container">
            <div class="gauge-marker" id="work-angle-marker"></div>
            <div class="gauge-range good"></div>
          </div>
          <div class="gauge-value" id="work-angle-value">45¬∞</div>
        </div>
        <div class="gauge-wrapper">
          <div class="gauge-label">√Ångulo Viaje</div>
          <div class="gauge-bar-container">
            <div class="gauge-marker" id="travel-angle-marker"></div>
            <div class="gauge-range good"></div>
          </div>
          <div class="gauge-value" id="travel-angle-value">0¬∞</div>
        </div>
        <div class="gauge-wrapper">
          <div class="gauge-label">Velocidad</div>
          <div class="gauge-bar-container">
            <div class="gauge-marker" id="velocity-marker"></div>
            <div class="gauge-range good"></div>
          </div>
          <div class="gauge-value" id="velocity-value">1.5 cm/s</div>
        </div>
      </div>
      
      <div class="eval-sensors">
        <div class="sensor-row">
          <div class="sensor-item">
            <span class="label">Trabajo</span>
            <span class="value" id="sensor-work">45¬∞</span>
            <span class="status ok" id="status-work">‚úì</span>
          </div>
          <div class="sensor-item">
            <span class="label">Viaje</span>
            <span class="value" id="sensor-travel">0¬∞</span>
            <span class="status ok" id="status-travel">‚úì</span>
          </div>
          <div class="sensor-item">
            <span class="label">Velocidad</span>
            <span class="value" id="sensor-velocity">1.5</span>
            <span class="status ok" id="status-velocity">‚úì</span>
          </div>
        </div>
      </div>
      
      <div class="eval-progress">
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <span id="progress-text">Progreso de evaluaci√≥n</span>
      </div>
      
      <div class="eval-actions">
        <button class="btn-danger" id="btn-stop-evaluation">
          <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M6 6h12v12H6z"/></svg>
          Detener Evaluaci√≥n
        </button>
      </div>
    </section>

    <!-- Pantalla de Resultados -->
    <section id="results-screen" class="screen">
      <h2>Resultados de Evaluaci√≥n</h2>
      
      <div class="participant-info" id="participant-info">
        <p><strong>Participante:</strong> <span id="result-participant">-</span></p>
        <p><strong>Fecha:</strong> <span id="result-date">-</span></p>
        <p><strong>Modo:</strong> <span id="result-mode">-</span></p>
      </div>
      
      <div class="results-summary">
        <div class="result-score">
          <div class="score-circle" id="score-circle">
            <span id="score-value">0</span>
            <span class="score-max">/100</span>
          </div>
          <span class="score-label">Puntuaci√≥n Final</span>
        </div>
        <div class="result-card">
          <span class="result-label">Calificaci√≥n</span>
          <span class="result-value" id="result-grade">-</span>
        </div>
      </div>
      
      <div class="metrics-grid">
        <div class="metric-card">
          <h4>√Ångulo de Trabajo</h4>
          <p class="metric-avg">Promedio: <span id="metric-work-avg">-</span></p>
          <p class="metric-range">Rango: <span id="metric-work-range">-</span></p>
          <span class="metric-status" id="metric-work-status">-</span>
        </div>
        <div class="metric-card">
          <h4>√Ångulo de Viaje</h4>
          <p class="metric-avg">Promedio: <span id="metric-travel-avg">-</span></p>
          <p class="metric-range">Rango: <span id="metric-travel-range">-</span></p>
          <span class="metric-status" id="metric-travel-status">-</span>
        </div>
        <div class="metric-card">
          <h4>Velocidad</h4>
          <p class="metric-avg">Promedio: <span id="metric-velocity-avg">-</span></p>
          <p class="metric-range">Rango: <span id="metric-velocity-range">-</span></p>
          <span class="metric-status" id="metric-velocity-status">-</span>
        </div>
        <div class="metric-card">
          <h4>Estabilidad</h4>
          <p class="metric-avg">Desviaci√≥n: <span id="metric-stability-avg">-</span></p>
          <p class="metric-range">Tiempo estable: <span id="metric-stability-time">-</span></p>
          <span class="metric-status" id="metric-stability-status">-</span>
        </div>
      </div>
      
      <div class="time-info">
        <p>Tiempo de evaluaci√≥n: <strong id="result-duration">-</strong></p>
        <p id="result-sent-status" class="hidden">‚úÖ Datos enviados correctamente</p>
        <p id="result-sent-error" class="hidden">‚ö†Ô∏è Error al enviar - Datos guardados localmente</p>
      </div>
      
      <div class="result-actions">
        <div class="action-group" id="group-with-data">
          <button class="btn-primary" id="btn-new-test">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
            Nueva Evaluaci√≥n
          </button>
          <button class="btn-secondary" id="btn-restart-same">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            Repetir Mismo Participante
          </button>
        </div>
        <div class="action-group hidden" id="group-quick-test">
          <button class="btn-primary" id="btn-quick-restart">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            Repetir Prueba
          </button>
          <button class="btn-secondary" id="btn-back-to-home">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
            Volver al Inicio
          </button>
        </div>
        <button class="btn-outline" id="btn-share-results">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"/></svg>
          Compartir Resultados
        </button>
      </div>
    </section>

    <!-- Pantalla de Historial -->
    <section id="history-screen" class="screen">
      <div class="history-content">
        <h2>Historial de Evaluaciones</h2>
        
        <div class="history-stats">
          <div class="stat-card">
            <span class="stat-value" id="total-evaluations">0</span>
            <span class="stat-label">Total</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="avg-score">0%</span>
            <span class="stat-label">Promedio</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="pass-rate">0%</span>
            <span class="stat-label">Aprobados</span>
          </div>
        </div>
        
        <div class="history-list" id="history-list">
          <p class="empty-history">No hay evaluaciones guardadas a√∫n.</p>
        </div>
        
        <div class="history-actions">
          <button class="btn-outline" id="btn-export-history">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg>
            Exportar Todo
          </button>
          <button class="btn-danger" id="btn-clear-history">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" style="margin-right: 8px; vertical-align: middle;"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>
            Limpiar Historial
          </button>
          <button class="btn-secondary" id="btn-back-from-history">
            Volver al Inicio
          </button>
        </div>
      </div>
    </section>

    <!-- Loader -->
    <div class="loader hidden" id="app-loader">
      <div class="spinner"></div>
      <p id="loader-text">Procesando...</p>
    </div>

    <!-- Contenedor de Toast -->
    <div id="toast-container"></div>

  </div>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
          .then(reg => console.log('Service Worker registrado:', reg.scope))
          .catch(err => console.log('Error al registrar Service Worker:', err));
      });
    }
  </script>
  
  <script src="app.js"></script>
</body>
</html>
